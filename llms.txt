# **compareGroups**

***package to create descriptive tables***

[![CRAN
version](https://www.r-pkg.org/badges/version/compareGroups)](https://cran.r-project.org/package=compareGroups)
![image not
found](https://cranlogs.r-pkg.org/badges/grand-total/compareGroups)![image
not found](https://cranlogs.r-pkg.org/badges/last-month/compareGroups)

## Overview

**compareGroups** is an R package available on CRAN which performs
descriptive tables displaying means, standard deviation, quantiles or
frequencies of several variables. Also, p-value to test equality between
groups is computed using the appropiate test.  

With a very simple code, nice, compact and ready-to-publish descriptives
table are displayed on R console. They can also be exported to different
formats, such as Word, Excel, PDF or inserted in a R-Sweave or
R-markdown document.  

You will find an extensive manual describing all **compareGropus**
capabilities with real examples in the
[vignette](https://isubirana.github.io/compareGroups/index.html/articles/compareGroups_vignette.md).  

Also, **compareGroups** package has been published in Journal of
Statistical Software \[Subirana et al, 2014\]
(<https://www.jstatsoft.org/v57/i12/>).

------------------------------------------------------------------------

## Who we are

![image not found](./reference/figures/prbb.jpg)

**`compareGroups`** is developed and maintained by Isaac Subirana,
Hector Sanz, Joan Vila and collaborators at the cardiovascular
epidemiology research unit (URLEC), located at [Barcelona Biomedical
Research Park (PRBB)](http://www.prbb.org/) .

  
  
  
  
  

![image not found](./reference/figures/logo_regicor.jpg)

As the driving force behind the [REGICOR
study](https://www.regicor.org), URLEC has extensive experience in
statistical epidemiology, and is a national reference centre for
research into cardiovascular diseases and their risk factors.

  
  

------------------------------------------------------------------------

## Gets started

Install the package from CRAN

``` R
install.packages("compareGroups")
```

or the lattest version from Github

``` R
library(devtools)
devtools::install_github("isubirana/compareGroups")
```

### Building the descriptive table

``` R
library(compareGroups)

data(regicor)

tab <- descrTable(year ~ . -id , regicor, hide.no = "no", 
                  method=c(triglyc=2, tocv=2, todeath=2), sd.type = 3)

export2md(tab, header.background = "black", header.color = "white", 
          caption = "Summary by intervention group")
```

|                                                  |       1995        |       2000        |       2005        | p.overall |
|:-------------------------------------------------|:-----------------:|:-----------------:|:-----------------:|:---------:|
|                                                  |       N=431       |       N=786       |      N=1077       |           |
| Age                                              |     54.1±11.7     |     54.3±11.2     |     55.3±10.6     |   0.079   |
| Sex:                                             |                   |                   |                   |   0.506   |
| Male                                             |    206 (47.8%)    |    390 (49.6%)    |    505 (46.9%)    |           |
| Female                                           |    225 (52.2%)    |    396 (50.4%)    |    572 (53.1%)    |           |
| Smoking status:                                  |                   |                   |                   |  \<0.001  |
| Never smoker                                     |    234 (56.4%)    |    414 (54.6%)    |    553 (52.2%)    |           |
| Current or former \< 1y                          |    109 (26.3%)    |    267 (35.2%)    |    217 (20.5%)    |           |
| Former \>= 1y                                    |    72 (17.3%)     |    77 (10.2%)     |    290 (27.4%)    |           |
| Systolic blood pressure                          |     133±19.2      |     133±21.3      |     129±19.8      |  \<0.001  |
| Diastolic blood pressure                         |     77.0±10.5     |     80.8±10.3     |     79.9±10.6     |  \<0.001  |
| History of hypertension                          |    111 (25.8%)    |    233 (29.6%)    |    379 (35.5%)    |  \<0.001  |
| Hypertension treatment                           |    71 (16.5%)     |    127 (16.2%)    |    230 (22.2%)    |   0.002   |
| Total cholesterol                                |     225±43.1      |     224±44.4      |     213±45.9      |  \<0.001  |
| HDL cholesterol                                  |     51.9±14.5     |     52.3±15.6     |     53.2±14.2     |   0.198   |
| Triglycerides                                    | 94.0 \[71.0;136\] | 98.0 \[72.0;133\] | 98.0 \[72.0;139\] |   0.762   |
| LDL cholesterol                                  |     152±38.4      |     149±38.6      |     136±39.7      |  \<0.001  |
| History of hyperchol.                            |    97 (22.5%)     |    256 (33.2%)    |    356 (33.2%)    |  \<0.001  |
| Cholesterol treatment                            |    28 (6.50%)     |    68 (8.80%)     |    132 (12.8%)    |  \<0.001  |
| Height (cm)                                      |     163±9.21      |     162±9.39      |     163±9.05      |   0.004   |
| Weight (Kg)                                      |     72.3±12.6     |     73.8±14.0     |     73.6±13.9     |   0.120   |
| Body mass index                                  |     27.0±4.15     |     28.1±4.62     |     27.6±4.63     |  \<0.001  |
| Physical activity (Kcal/week)                    |      491±419      |      422±377      |      351±378      |  \<0.001  |
| Physical component                               |     49.3±8.08     |     49.0±9.63     |     50.1±8.91     |   0.037   |
| Mental component                                 |     49.2±11.3     |     48.9±11.0     |     46.9±10.8     |  \<0.001  |
| Cardiovascular event                             |    10 (2.51%)     |    35 (4.72%)     |    47 (4.59%)     |   0.161   |
| Days to cardiovascular event or end of follow-up | 1728 \[746;2767\] | 1617 \[723;2596\] | 1775 \[835;2723\] |   0.096   |
| Overall death                                    |    18 (4.65%)     |    81 (11.0%)     |    74 (7.23%)     |  \<0.001  |
| Days to overall death or end of follow-up        | 1557 \[812;2689\] | 1609 \[734;2549\] | 1734 \[817;2713\] |   0.249   |

Summary by intervention group

### Stratified table

``` R
tabstrat <- strataTable(update(tab, . ~ . -sex), "sex")

export2md(tabstrat, header.background = "black", header.color = "white", size=9)
```

[TABLE]

Summary descriptive tables

### Visual exploration

|                                                     |                                                     |
|:---------------------------------------------------:|:---------------------------------------------------:|
|                 `plot(tab[“sex”])`                  |                 `plot(tab[“age”])`                  |
| ![image not found](./reference/figures/var1sex.png) | ![image not found](./reference/figures/var1age.png) |

### Computing Odds Ratios

``` R
data(SNPs)

tabor <- descrTable(casco ~ .-id, SNPs, show.ratio=TRUE, show.p.overall=FALSE)

export2md(tabor[1:4])
```

|           |       0       |       1       |         OR         | p.ratio |
|:----------|:-------------:|:-------------:|:------------------:|:-------:|
|           |     N=47      |     N=110     |                    |         |
| sex:      |               |               |                    |         |
| Male      |  21 (44.7%)   |  54 (49.1%)   |        Ref.        |  Ref.   |
| Female    |  26 (55.3%)   |  56 (50.9%)   | 0.84 \[0.42;1.67\] |  0.619  |
| blood.pre |  13.1 (0.88)  |  12.9 (1.03)  | 0.78 \[0.55;1.11\] |  0.174  |
| protein   | 39938 (19770) | 44371 (24897) | 1.00 \[1.00;1.00\] |  0.280  |
| snp10001: |               |               |                    |         |
| CC        |   2 (4.26%)   |  10 (9.09%)   |        Ref.        |  Ref.   |
| CT        |  21 (44.7%)   |  32 (29.1%)   | 0.33 \[0.04;1.43\] |  0.147  |
| TT        |  24 (51.1%)   |  68 (61.8%)   | 0.60 \[0.08;2.55\] |  0.521  |

Summary descriptives table by groups of \`casco’

### Computing Hazard Ratios

``` R
library(survival)
regicor$tcv <- Surv(regicor$tocv, regicor$cv=="Yes")

tabhr <- descrTable(tcv ~ .-id-cv-tocv, regicor, 
           method=c(triglyc=2, tocv=2, todeath=2),
           hide.no="no", ref.no="no",
           show.ratio=TRUE, show.p.overall=FALSE)


export2md(tabhr[1:10], header.label=c("p.ratio"="p-value"),
          caption="Descriptives by cardiovascular event")  
```

|                          |   No event   |    Event    |         HR         | p-value |
|:-------------------------|:------------:|:-----------:|:------------------:|:-------:|
|                          |    N=2071    |    N=92     |                    |         |
| Recruitment year:        |              |             |                    |         |
| 1995                     | 388 (18.7%)  | 10 (10.9%)  |        Ref.        |  Ref.   |
| 2000                     | 706 (34.1%)  | 35 (38.0%)  | 1.95 \[0.96;3.93\] |  0.063  |
| 2005                     | 977 (47.2%)  | 47 (51.1%)  | 1.82 \[0.92;3.59\] |  0.087  |
| Age                      | 54.6 (11.1)  | 57.5 (11.0) | 1.02 \[1.00;1.04\] |  0.021  |
| Sex:                     |              |             |                    |         |
| Male                     | 996 (48.1%)  | 46 (50.0%)  |        Ref.        |  Ref.   |
| Female                   | 1075 (51.9%) | 46 (50.0%)  | 0.92 \[0.61;1.39\] |  0.696  |
| Smoking status:          |              |             |                    |         |
| Never smoker             | 1099 (54.3%) | 37 (40.2%)  |        Ref.        |  Ref.   |
| Current or former \< 1y  | 506 (25.0%)  | 47 (51.1%)  | 2.67 \[1.74;4.11\] | \<0.001 |
| Former \>= 1y            | 419 (20.7%)  |  8 (8.70%)  | 0.55 \[0.26;1.18\] |  0.123  |
| Systolic blood pressure  |  131 (20.3)  | 138 (21.5)  | 1.02 \[1.01;1.02\] |  0.001  |
| Diastolic blood pressure | 79.5 (10.4)  | 82.9 (12.3) | 1.03 \[1.01;1.05\] |  0.002  |
| History of hypertension  | 647 (31.3%)  | 38 (41.3%)  | 1.52 \[1.01;2.31\] |  0.047  |
| Hypertension treatment   | 382 (18.7%)  | 22 (23.9%)  | 1.37 \[0.85;2.22\] |  0.195  |
| Total cholesterol        |  218 (44.5)  | 224 (50.4)  | 1.00 \[1.00;1.01\] |  0.207  |
| HDL cholesterol          | 52.8 (14.8)  | 50.4 (13.3) | 0.99 \[0.97;1.00\] |  0.114  |

Descriptives by cardiovascular event

### Web-based User Interface

For those not familiar to R syntax, a Web User Interface (**WUI**) has
been implemented using [Shiny](https://shiny.rstudio.com/) tools, which
can be used off line by typing
[`cGroupsWUI()`](https://isubirana.github.io/compareGroups/index.html/reference/cGroupsWUI.md)
after having `compareGroups` package installed and loaded, or remotely
just accessing the application hosted in a [shinyapp.io
server](https://isubirana.shinyapps.io/compareGroups/).

![image not found](./reference/figures/WUI.png)

# Package index

## compareGropus package

- [`compareGroups-package`](https://isubirana.github.io/compareGroups/index.html/reference/compareGroups-package.md)
  [`compareGroups-package`](https://isubirana.github.io/compareGroups/index.html/reference/compareGroups-package.md)
  : Descriptive analysis by groups

## Computing descriptives

- [`compareGroups()`](https://isubirana.github.io/compareGroups/index.html/reference/compareGroups.md)
  [`plot(`*`<compareGroups>`*`)`](https://isubirana.github.io/compareGroups/index.html/reference/compareGroups.md)
  : Descriptives by groups
- [`compareSNPs()`](https://isubirana.github.io/compareGroups/index.html/reference/compareSNPs.md)
  : Summarise genetic data by groups.

## Building descriptive tables

- [`createTable()`](https://isubirana.github.io/compareGroups/index.html/reference/createTable.md)
  [`print(`*`<createTable>`*`)`](https://isubirana.github.io/compareGroups/index.html/reference/createTable.md)
  [`plot(`*`<createTable>`*`)`](https://isubirana.github.io/compareGroups/index.html/reference/createTable.md)
  : Table of descriptives by groups: bivariate table
- [`descrTable()`](https://isubirana.github.io/compareGroups/index.html/reference/descrTable.md)
  : Perform descriptives and build the bivariate table.
- [`strataTable()`](https://isubirana.github.io/compareGroups/index.html/reference/strataTable.md)
  : Stratify descriptive table in stratas.

## Exporting and saving descriptive tables

- [`export2csv()`](https://isubirana.github.io/compareGroups/index.html/reference/export2csv.md)
  : Exporting descriptives table to plain text (CSV) format
- [`export2html()`](https://isubirana.github.io/compareGroups/index.html/reference/export2html.md)
  : Exporting descriptives table to HTML format
- [`export2latex()`](https://isubirana.github.io/compareGroups/index.html/reference/export2latex.md)
  : Exporting descriptives table to LaTeX format
- [`export2md()`](https://isubirana.github.io/compareGroups/index.html/reference/export2md.md)
  : Exporting descriptives table to Markdown format
- [`export2pdf()`](https://isubirana.github.io/compareGroups/index.html/reference/export2pdf.md)
  : Exports tables to PDF files.
- [`export2word()`](https://isubirana.github.io/compareGroups/index.html/reference/export2word.md)
  : Exports tables to Word files.
- [`export2xls()`](https://isubirana.github.io/compareGroups/index.html/reference/export2xls.md)
  : Exporting descriptives table to Exel format (.xlsx or .xls)

## Retrieving results from a descriptive tables

- [`getResults()`](https://isubirana.github.io/compareGroups/index.html/reference/getResults.md)
  : Easily retrieve summary data as R-objects (matrices and vectors).

## Graphical user interfaces

- [`cGroupsGUI()`](https://isubirana.github.io/compareGroups/index.html/reference/cGroupsGUI.md)
  : Graphical user interface based on tcltk tools
- [`cGroupsWUI()`](https://isubirana.github.io/compareGroups/index.html/reference/cGroupsWUI.md)
  : Web User Interface based on Shiny tools.

## Miscelania functions

- [`printTable()`](https://isubirana.github.io/compareGroups/index.html/reference/printTable.md)
  : 'Nice' table format.
- [`radiograph()`](https://isubirana.github.io/compareGroups/index.html/reference/radiograph.md)
  : Lists the values in the data set.
- [`report()`](https://isubirana.github.io/compareGroups/index.html/reference/report.md)
  : Report of descriptive tables and plots.
- [`varinfo()`](https://isubirana.github.io/compareGroups/index.html/reference/varinfo.md)
  : Variable names and labels extraction
- [`missingTable()`](https://isubirana.github.io/compareGroups/index.html/reference/missingTable.md)
  : Table of missingness counts by groups.
- [`padjustCompareGroups()`](https://isubirana.github.io/compareGroups/index.html/reference/padjustCompareGroups.md)
  : Update p values according multiple comparisons

## compareGroups Datasets

- [`SNPs`](https://isubirana.github.io/compareGroups/index.html/reference/SNPs.md)
  : SNPs in a case-control study
- [`regicor`](https://isubirana.github.io/compareGroups/index.html/reference/regicor.md)
  : REGICOR cross-sectional data

# Articles

### All vignettes

- [compareGroups 4.0: Descriptives by
  groups](https://isubirana.github.io/compareGroups/index.html/articles/compareGroups_vignette.md):
- [Example 1: Building a descriptive
  table.](https://isubirana.github.io/compareGroups/index.html/articles/example1.md):
- [Example 2: Exploring your data
  graphically.](https://isubirana.github.io/compareGroups/index.html/articles/example2.md):
- [Web User
  Interface](https://isubirana.github.io/compareGroups/index.html/articles/wui.md):
